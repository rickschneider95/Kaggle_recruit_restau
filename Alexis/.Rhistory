append_1 <- dataset %>%
group_by(id,visit_date) %>%
summarise(sum(visitors))
append_1
summary(is.na(dataset))
summary(is.na(air_visit_data))
summary(is.na(dataset))
rm(one_h)
dataset <- read.csv("data/complete_data_final.csv")
dataset <- read.csv("data/complete_data_final.csv")
data_air <- dataset %>%
filter(str_detect(id, "^air"))
append_1 <- data_air %>%
group_by(id,visit_date) %>%
summarise(sum(visitors))
append_2 <- dataset %>%
group_by(id,visit_date) %>%
summarise(sum(reserve_visitors))
dataset <- read.csv("data/complete_data_final.csv")
data_air <- dataset %>%
filter(str_detect(id, "^air"))
append_1 <- data_air %>%
group_by(id,visit_date) %>%
summarise(sum(visitors))
data_air
dataset
date_info
rm(dataset)
dataset <- read.csv("data/complete_data_final.csv")
summary(is.na(dataset))
data_air <- dataset %>%
filter(str_detect(id, "^air"))
summary(is.na(data_air))
append_1 <- data_air %>%
group_by(id,visit_date) %>%
summarise(sum(visitors))
append_2 <- dataset %>%
group_by(id,visit_date) %>%
summarise(sum(reserve_visitors))
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != NA)
summary(is.na(data_air))
data_air
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA")
data_air
summary(is.na(data_air))
append_1 <- data_air %>%
group_by(id,visit_date) %>%
summarise(sum(visitors))
append_1
try <- data_air
try
try1 <- left_join(dataset,append_1, by = c("id","visit_date"))
try1
try1 <- left_join(try,append_1, by = c("id","visit_date"))
try1
append_2
append_2 <- data_air %>%
group_by(id,visit_date) %>%
summarise(sum(reserve_visitors))
append_2
data_air
append_2 <- data_air %>%
group_by(id,visit_date) %>%
summarise(reserve_visitors = sum(reserve_visitors))
append_2
summary(is.na(append_2))
summary(is.na(data_air))
append_1 <- data_air %>%
group_by(id,visit_date) %>%
summarise(visitors = sum(visitors))
append_2 <- data_air %>%
group_by(id,visit_date) %>%
summarise(reserve_visitors = sum(reserve_visitors))
try <- data_air
try1 <- left_join(try,append_1, by = c("id","visit_date"))
try2 <- left_join(try1,append_2, by = c("id","visit_date"))
try2
append_1
append_2
append_1
full_join(append_1,append_2, by = c("id","visit_date"))
data_air <- data_air %>%
select(-c(visitors,reserve_visitors))
dataset_full <- left_join(append,data_air,by = c("id","visit_date"))
dataset_full <- full_join(append,data_air,by = c("id","visit_date"))
rm(append)
append <- full_join(append_1,append_2, by = c("id","visit_date"))
data_air <- data_air %>%
select(-c(visitors,reserve_visitors))
data_air
append
data_air
dataset_full <- full_join(append,data_air,by = c("id","visit_date"))
dataset_full
data_air
append
rm(dataset_full)
dataset_full <- left_join(append,data_air,by = c("id","visit_date"))
dataset_full
append
data_air
append
dates_id <- append[,1:2]
dates_id
data_air %>%
group_by(id,visit_date) %>%
summarise(visitors = sum(visitors))
data_air
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(onehot)
library(data.table)
library(mltools)
library(dplyr)
library(stringr)
library(lubridate)
library(caret)
dataset <- read.csv("data/complete_data_final.csv")
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA")
data_air %>%
group_by(id,visit_date) %>%
summarise(visitors = sum(visitors))
data_air
data_air %>%
group_by(id,visit_date,genre_name) %>%
summarise(visitors = sum(visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1")
data_air %>%
group_by(id,visit_date,genre_name) %>%
summarise(visitors = sum(visitors))
data_air %>%
group_by(id) %>%
mutate(genre_name = genre_name)
data_air %>%
group_by(id) %>%
mutate(genre_name = genre_name) %>%
filter(id == "air_034a3d5b40d5b1b1")
d <- data_air %>%
group_by(id) %>%
data_air %>%
group_by(id) %>%
mutate(genre_name = genre_name) %>%
filter(id == "air_034a3d5b40d5b1b1")
d <- data_air %>%
group_by(id)
data_air %>%
group_by(id) %>%
is.na(d$genre_name)
data_air %>%
group_by(id) %>%
mutate(index = is.na(d$genre_name))
data_air %>%
group_by(id) %>%
mutate(index = is.na(genre_name))
data_air %>%
group_by(id) %>%
mutate(genre_name = genre_name) %>%
filter(id == "air_034a3d5b40d5b1b1")
data_air %>%
group_by(id) %>%
filter(id == "air_034a3d5b40d5b1b1")
data_air %>% left_join(data_air,by = c("id","visit_date")) %>%   filter(id == "air_034a3d5b40d5b1b1")
append <- full_join(append_1,append_2, by = c("id"))
append <- full_join(append_1,append_2, by = c("id","visit_date"))
append
data_air %>% left_join(data_air,by = "id") %>%   filter(id == "air_034a3d5b40d5b1b1")
data_air %>% inner_join(data_air,by = "id") %>%   filter(id == "air_034a3d5b40d5b1b1")
data_air %>%
group_by(id,visit_date,genre_name) %>%
summarise(visitors = sum(visitors))
data_air
data_air %>%
group_by(id,visit_date,genre_name,latitude,longitude,area_name,) %>%
summarise(visitors = sum(visitors))
append_2 <- data_air %>%
group_by(id,visit_date) %>%
summarise(reserve_visitors = sum(reserve_visitors))
append_2
append <- full_join(append_1,append_2, by = c("id","visit_date"))
append
append_1 <- data_air %>%
group_by(id,visit_date,genre_name,latitude,longitude,area_name) %>%
summarise(visitors = sum(visitors))
append_1
append_2
append <- full_join(append_1,append_2, by = c("id","visit_date"))
append
summary(is.na(append))
append
data_air
data_air %>%
select(visit_date,day_of_the_week_visit,holiday_flg_visit)
data_air %>%
select(visit_date,day_of_the_week_visit,holiday_flg_visit) %>%
distinct(visit_date,day_of_the_week_visit,holiday_flg_visit)
date_infos <- data_air %>%
select(visit_date,day_of_the_week_visit,holiday_flg_visit) %>%
distinct(visit_date,day_of_the_week_visit,holiday_flg_visit)
append
date_infos <- data_air %>%
select(visit_date,day_of_the_week_visit,holiday_flg_visit) %>%
distinct(visit_date,day_of_the_week_visit,holiday_flg_visit)
append %>% left_join(date_infos,by = "visit_date")
509,900 / 2
509.900 / 2
append
append %>% right_join(date_infos,by = "visit_date")
append %>% full_join(date_infos,by = "visit_date")
append %>% inner_join(date_infos,by = "visit_date")
left_join(append,date_infos,by = "visit_date")
left_join(append,date_infos,by = "visit_date") %>% distinct(id,genre_name,latitude,longitude,area_name,visitors,reserve_visitors,visit_date,day_of_the_week_visit,holiday_flg_visit)
append
append
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
append %>% fill(genre_name)
append %>% filter(id == "air_034a3d5b40d5b1b1")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(onehot)
library(data.table)
library(mltools)
library(dplyr)
library(stringr)
library(lubridate)
library(caret)
append
append_final <- full_join(append_1,append_2, by = c("id","visit_date"))
dataset <- read.csv("data/complete_data_final.csv")
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA")
append_1 <- data_air %>%
group_by(id,visit_date,genre_name,latitude,longitude,area_name) %>%
summarise(visitors = sum(visitors))
append_2 <- data_air %>%
group_by(id,visit_date) %>%
summarise(reserve_visitors = sum(reserve_visitors))
append_final <- full_join(append_1,append_2, by = c("id","visit_date"))
append_final
append %>% filter(id == "air_034a3d5b40d5b1b1")
append_final %>% filter(id == "air_034a3d5b40d5b1b1")
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>%  fill(genre_name)
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>% fill(genre_name)
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>% fill(c(genre_name,area_name,latitude,longitude))
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>% fill(c(genre_name,area_name,latitude,longitude,day_of_the_week_visit,holiday_flg_visit))
data_air %>% filter(id == "air_034a3d5b40d5b1b1")
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>% fill(c(genre_name,area_name,latitude,longitude,day_of_the_week_visit,holiday_flg_visit))
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% filter(id == "air_034a3d5b40d5b1b1") %>% fill(c(genre_name,area_name,latitude,longitude))
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
data_air %>% group_by(id) %>% fill(c(genre_name,area_name,latitude,longitude))
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
try <- data_air %>% group_by(id) %>% fill(c(genre_name,area_name,latitude,longitude))
summary(is.na(try))
View(try)
try %>% filter(id == "air_034a3d5b40d5b1b1")
sum(is.na(try$genre_name))
summary(is.na(data_air))
summary(is.na(try))
try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
try <- try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
summary(is.na(try))
summary(is.na(data_air))
try %>% filter(id == "air_034a3d5b40d5b1b1")
date_info
try$visit_date
levels(as.factor(try$visit_date))
try
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
try <- data_air %>% group_by(id) %>% fill(c(genre_name,area_name,latitude,longitude))
nrow(try)
nrow(data_air)
nrow(try)
summary(is.na(data_air))
summary(is.na(try))
try %>% filter(id == "air_034a3d5b40d5b1b1")
date_info
try
date_info
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
try <- data_air %>% group_by(id) %>% fill(c(genre_name,area_name,latitude,longitude))
data_info
date_info
# try <- try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
date_info %>% rename(visit_date = calender_date)
date_info
# try <- try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
date_info %>% rename(visit_date = calendar_date)
# try <- try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
date_info <- date_info %>% rename(visit_date = calendar_date)
date_info
try2 <- full_join(try,date_info,by="visit_date")
try2
nrow(data_air)
try2
try %>% select(-c(day_of_the_week_visit,holiday_flg_visit))
try <- try %>% select(-c(day_of_the_week_visit,holiday_flg_visit))
# try <- data_air
# try1 <- left_join(try,append_1, by = c("id","visit_date"))
# try2 <- left_join(try1,append_2, by = c("id","visit_date"))
# try3 <- left_join
# try2
#
#   sum(is.na(append_2$reserve_visitors))
# sum(is.na(data_air))
#
# sum(is.na(dataset$reserve_visitors))
try <- data_air %>% group_by(id) %>% fill(c(genre_name,area_name,latitude,longitude))
try <- try %>% select(-c(day_of_the_week_visit,holiday_flg_visit))
nrow(data_air)
nrow(try)
summary(is.na(try))
summary(is.na(data_air))
summary(is.na(try))
# try <- try %>% group_by(visit_date) %>% fill(c(day_of_the_week_visit,holiday_flg_visit))
date_info <- date_info %>% rename(visit_date = calendar_date)
date_info
rm(try2)
try2 <- full_join(try,date_info,by="visit_date")
try2
summary(is.na(try2))
dataset <- read.csv("data/complete_data_final.csv")
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA")
summary(is.na(data_air))
data_air <- data_air %>%
group_by(id) %>%
fill(c(genre_name,area_name,latitude,longitude))
summary(is.na(data_air))
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA") %>%
select(-c(holiday_flg_visit,day_of_the_week_visit)) %>%
select(-c(reserve_date,reserve_time,reserve_visitors,day_of_the_week_reserve,holiday_flg_reserve))
data_air
summary(is.na(data_air))
data_air <- data_air %>%
group_by(id) %>%
fill(c(genre_name,area_name,latitude,longitude))
summary(is.na(data_Air))
summary(is.na(data_air))
summary(is.na(data_air))
date_info <- date_info %>%
rename(visit_date = calendar_date)
date_info
data_air <- full_join(data_air,date_info,by="visit_date")
summary(is.na(data_air))
nrow(data_air)
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA") %>%
select(-c(holiday_flg_visit,day_of_the_week_visit)) %>%  # I unselect these since they aren't correct
select(-c(reserve_date,reserve_time,reserve_visitors,day_of_the_week_reserve,holiday_flg_reserve)) # Can't use these as long as we don't have the method to implement them in time series
nrow(data_air)
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA") %>%
select(-c(holiday_flg_visit,day_of_the_week_visit)) %>%  # I unselect these since they aren't correct
select(-c(reserve_date,reserve_time,reserve_visitors,day_of_the_week_reserve,holiday_flg_reserve)) # Can't use these as long as we don't have the method to implement them in time series
summary(is.na(data_air))
data_air <- data_air %>%
group_by(id) %>%
fill(c(genre_name,area_name,latitude,longitude))
summary(is.na(data_air))
date_info <- date_info %>%
rename(visit_date = calendar_date)
data_air <- inner_join(data_air,date_info,by="visit_date") # CAREFULL, here it's an inner join, some days there were just no restaurants open :)
summary(is.na(data_air))
summary(is.na(data_air))
data_air
View(air_visit_data)
View(air_reserve)
data_air <- dataset %>%
filter(str_detect(id, "^air")) %>%
filter(visitors != "NA") %>%
select(-c(holiday_flg_visit,day_of_the_week_visit)) %>%  # I unselect these since they aren't correct
select(-c(visit_time,reserve_date,reserve_time,reserve_visitors,day_of_the_week_reserve,holiday_flg_reserve)) # Can't use these as long as we don't have the method to implement them in time series
summary(is.na(data_air))
data_air <- data_air %>%
group_by(id) %>%
fill(c(genre_name,area_name,latitude,longitude))
summary(is.na(data_air))
date_info <- date_info %>%
rename(visit_date = calendar_date)
date_info <- read.csv("data/date_info.csv")
date_info <- date_info %>%
rename(visit_date = calendar_date)
date_info <- read.csv("data/date_info.csv")
date_info <- date_info %>%
rename(visit_date = calendar_date)
date_info
data_air <- inner_join(data_air,date_info,by="visit_date") # CAREFULL, here it's an inner join, some days there were just no restaurants open :)
summary(is.na(data_air))
append_1 <- data_air %>%
group_by(id,visit_date,genre_name,latitude,longitude,area_name) %>%
summarise(visitors = sum(visitors))
append_1
append_1
summary(is.na(append_1))
