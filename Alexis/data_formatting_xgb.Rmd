---
title: "format_data_xgb"
author: "Alexis Laks"
date: "29/11/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(stringr)
library(lubridate)
```

This file will be dedicated to formatting the complete_data.csv file to feed to the xgb model. 


# Keeping only hpg <-> air and air:

```{r}
data <- read.csv("data/complete_data.csv")
```


```{r}
data %>% filter(str_detect(id, "^air"))
```

```{r}
data %>% filter(str_detect(id, "^hpg"))
```


```{r}
time_transf <- function(data,column){
  data %>% select()
}


```
```{r}
data <- data %>%
  mutate(day_visit = day(dmy(visit_date)),
         day_reserve = day(dmy(reserve_date)),
         month_visit = month(dmy(visit_date)),
         month_reserve = month(dmy(reserve_date)),
         year_visit = year(dmy(visit_date)),
         year_reserve = year(dmy(visit_date)),
         latency_days=ifelse(is.na(reserve_date),as.numeric(as.Date(visit_date)-as.Date(reserve_date)),0),
         latency_people=ifelse(is.na(reserve_visitors),visitors-reserve_visitors,0))
```


