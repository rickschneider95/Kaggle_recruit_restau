knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(timeDate)
visit_air <- read_csv("data/air_visit_data.csv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(timeDate)
library(readr)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
View(visit_air)
View(visit_air)
View(visit_air2)
View(visit_air2)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>%  mutate(visit_datetime = as.POSIXlt(visit_datetime))
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('date', 'time'), sep = 10)
View(visit_air2)
View(visit_air2)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
View(visit_air2)
View(visit_air2)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air2 %>% filter(air_store_id==air_ba937bf13d40fb24)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air2 %>% filter(air_store_id=='air_ba937bf13d40fb24')
View(visit_test)
View(visit_test)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air2 %>% filter(air_store_id=='air_d473620754bf9fc2')
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air %>% filter(air_store_id=='air_d473620754bf9fc2')
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air %>% filter(air_store_id=='air_877f79706adbfb06')
View(visit_test)
View(visit_test)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06')
visit_test <- visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
visit_test <- visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow()
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow()
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow()
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow()
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
# From below we can conclude the data separate each reservation ( meaning one row correspond to one reservation per restaurant per day and not all the reservation per restaurant per day)
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
# From below we can conclude the data doesn't separate each visit ( meaning one row correspond to all visit  per restaurant per day)
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 383
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get383
visit_test <- visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
# From below we can conclude the data separate each reservation ( meaning one row correspond to one reservation per restaurant per day and not all the reservation per restaurant per day)
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
# From below we can conclude the data doesn't separate each visit ( meaning one row correspond to all visit  per restaurant per day)
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 383
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get383
visit_test <- visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15')
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15')
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') %>%summarise(total= sum(reserve_visitors))
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
# From below we can conclude the data separate each reservation ( meaning one row correspond to one reservation per restaurant per day and not all the reservation per restaurant per day)
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
# From below we can conclude the data doesn't separate each visit ( meaning one row correspond to all visit  per restaurant per day)
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 383
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get383
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') %>%summarise(total= sum(reserve_visitors)) #output 19
visit_air %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15')
visit_air %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') #output 19
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
# From below we can conclude the data separate each reservation ( meaning one row correspond to one reservation per restaurant per day and not all the reservation per restaurant per day)
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
# From below we can conclude the data doesn't separate each visit ( meaning one row correspond to all visit  per restaurant per day)
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 383
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get383
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') %>%summarise(total= sum(reserve_visitors)) #output 19
visit_air %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') #output 19
visit_air2 %>% filter(air_store_id=='air_db80363d35f10926')
visit_air %>% filter(air_store_id=='air_db80363d35f10926')
visit_air2 %>% filter(air_store_id=='air_db80363d35f10926')
visit_air2 %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30')
visit_air %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30')
visit_air2 %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30') %>% summarise(total= sum(reserve_visitors))
visit_air %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30')
#how many stores in each data frame ?
visit_air2  %>% nrow()
visit_air2 %>% distinct(air_store_id) %>% nrow()
visit_air %>% distinct(air_store_id) %>% nrow()
knitr::opts_chunk$set(echo = TRUE)
sample <- read_csv("sample_submission.csv")
sample <- read_csv("data/sample_submission.csv")
library(tidyverse)
library(lubridate)
library(timeDate)
library(readr)
sample <- read_csv("data/sample_submission.csv")
head(sample)
View(sample)
View(sample)
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation")
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
View(store_id)
View(store_id)
knitr::opts_chunk$set(echo = TRUE)
#libraries:
library(dplyr)
library(ggplot2)
library(lubridate)
library(gridExtra)
#Load data
air <- read.csv("data/air_reserve.csv")
rm(list=ls())
knitr::opts_chunk$set(echo = TRUE)
#libraries:
library(dplyr)
library(ggplot2)
library(lubridate)
library(gridExtra)
#Load data
air <- read.csv("data/air_reserve.csv")
#air_visit <- read.csv("data/air_visit_data.csv")
#View(air_visit)
View(air)
dim(air)
names(air)
glimpse(air)
sum(is.na(air))
#How many different stores:
air %>% distinct(air_store_id) %>% summarize(n())
#Number of visits per store:
store_count <- air %>%
group_by(air_store_id) %>%
summarize(count=sum(reserve_visitors))
summary(store_count$count)
#Transformation in date time:
#visit time:
air$visit_datetime <- as.POSIXct(air$visit_datetime)
summary(air$visit_datetime)
#reserve time:
air$reserve_datetime <- as.POSIXct(air$reserve_datetime)
summary(air$reserve_datetime)
#generate new columns for year, month, day
air <- air %>%
mutate(visit_wday = wday(air$visit_datetime,label=TRUE),
visit_month = month(air$visit_datetime,label=TRUE),
visit_year = year(air$visit_datetime),
visit_date = date(air$visit_datetime),
visit_hour = hour(air$visit_datetime))
air %>% filter(visit_month == "Aug") %>% summarize(sum=sum(reserve_visitors))
#number of visitors per year:
p1 <- air %>%
group_by(visit_year) %>%
summarise(count =n()) %>%
ggplot(aes(x=visit_year,y=count)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Year",y="number of visitors")
#number of visitors per month:
p2 <- air %>%
group_by(visit_month) %>%
summarise(count = n()) %>%
ggplot(aes(x=visit_month,y=count)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Month",y="number of visitors")
#number of visitors per day:
p3 <- air %>%
group_by(visit_wday) %>%
summarise(count =n()) %>%
ggplot(aes(x=visit_wday,y=count)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Weekdays",y="number of visitors")
#time evaluation of the number of visitors:
p4 <- air %>%
group_by(visit_date) %>%
summarise(count = n()) %>%
ggplot(aes(x=visit_date,y=count)) +
geom_line(col="skyblue") +
theme_classic() +
labs(x="Date",y="number of visitors")
#Put the plots together:
grid.arrange(p1, p2, p3, p4, ncol=2)
#generate new columns for reservation:
air <- air %>%
mutate(reserve_wday = wday(air$visit_datetime,label=TRUE),
reserve_month = month(air$visit_datetime,label=TRUE),
reserve_year = year(air$visit_datetime),
reserve_date = date(air$visit_datetime))
#number of visitors per year:
p1 <- air %>%
group_by(reserve_year) %>%
summarise(sum =sum(reserve_visitors)) %>%
ggplot(aes(x=reserve_year,y=sum)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Year of reservation",y="number of visitors")
#number of visitors per month:
p2 <- air %>%
group_by(reserve_month) %>%
summarise(sum =sum(reserve_visitors)) %>%
ggplot(aes(x=reserve_month,y=sum)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Month of reservation",y="number of visitors")
#number of visitors per day:
p3 <- air %>%
group_by(reserve_wday) %>%
summarise(sum =sum(reserve_visitors)) %>%
ggplot(aes(x=reserve_wday,y=sum)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Weekdays of reservation",y="number of visitors")
#time evaluation of the number of visitors:
p4 <- air %>%
group_by(reserve_date ) %>%
summarise(sum = sum(reserve_visitors)) %>%
ggplot(aes(x=reserve_date ,y=sum)) +
geom_line(col="skyblue") +
theme_classic() +
labs(x="Date of reservation",y="number of visitors")
#Put the plots together:
grid.arrange(p1, p2, p3, p4, ncol=2)
#calculate lapse of time:
air <- air %>%
mutate(lapse = visit_date-reserve_date)
air %>%  distinct(lapse)
#count plot lapse:
#number of visitors per year:
p1 <- air %>%
group_by(lapse) %>%
summarise(count =n()) %>%
ggplot(aes(x=lapse,y=count)) +
geom_col(fill = "skyblue") +
theme_classic() +
labs(x="Year",y="number of visitors")
p1
#import air_visit and store_id_relation and hpg_reseve:
air_visit <- read.csv("data/air_visit_data.csv")
relation <- read.csv("data/store_id_relation.csv")
hpg <- read.csv("data/hpg_reserve.csv")
View(air_visit)
View(relation)
View(hpg)
air %>% distinct(air_store_id) %>% summarize(n())            #314
hpg %>% distinct(hpg_store_id) %>% summarize(n())            #13325
air_visit %>% distinct(air_store_id) %>% summarize(n())      #829
dim(relation)
#transfrom Id in air before concatenating:
air_c <- air <- read.csv("data/air_reserve.csv")
air_c <- full_join(air, relation, by= "air_store_id")
ind <- !is.na(air_c[,"hpg_store_id"])
air_c[ind,"air_store_id"] <- as.character(air_c[ind,"hpg_store_id"])
#drop hp_store_id:
air_c <- air_c[,-5]
#rename store-id
air_c <- air_c %>% rename(id = air_store_id)
hpg <- hpg %>% rename(id = hpg_store_id)
#concatenate:
global <- rbind(air_c, hpg)
global %>% distinct(store_id) %>% summarize(n())    #13508
dim(global)
#check rows of output to comapre if complete:
submission <- read.csv("data/sample_submission.csv")
glimpse(submission)
dim(submission)
submission %>% distinct(id) %>% summarize(n())
dim(global)
visit_air <- read_csv("data/air_visit_data.csv")
visit_air %>% glimpse()
visit_air %>% distinct(air_store_id) %>% nrow()
c(min(visit_air$visit_date),max(visit_air$visit_date))
visit_air2 <- read_csv("data/air_reserve.csv")
visit_air2 %>% glimpse()
visit_air2 %>% distinct(air_store_id) %>% nrow()
c(min(visit_air2$visit_datetime),max(visit_air2$visit_datetime))
visit_air2 <-visit_air2 %>% separate(visit_datetime, into = c('visit_date', 'visit_time'), sep = 10) %>% separate(reserve_datetime, into = c('reserve_date', 'reserve_time'), sep = 10)
# From below we can conclude the data separate each reservation ( meaning one row correspond to one reservation per restaurant per day and not all the reservation per restaurant per day)
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 259
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get 1061
# From below we can conclude the data doesn't separate each visit ( meaning one row correspond to all visit  per restaurant per day)
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% distinct(visit_date) %>% nrow() #get 383
visit_air %>% filter(air_store_id=='air_877f79706adbfb06') %>% group_by(visit_date) %>% nrow() #get383
# random test
visit_air2 %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') %>%summarise(total= sum(reserve_visitors)) #output 19
visit_air %>% filter(air_store_id=='air_877f79706adbfb06',visit_date=='2016-01-15') #output 19
visit_air2 %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30') %>% summarise(total= sum(reserve_visitors)) #output 20
visit_air %>% filter(air_store_id=='air_db80363d35f10926',visit_date=='2016-01-30') #output 48
#how many stores in each data frame ?
visit_air2  %>% nrow() #92378
visit_air2 %>% distinct(air_store_id) %>% nrow() #314
visit_air %>% distinct(air_store_id) %>% nrow() #829
visit_air %>% distinct(air_store_id) %>% nrow()
View(submission)
View(submission)
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
store_id <- store_id  %>% separate(air_store_id,into = c('ID', 'date'), sep = 20)
sample_submission <- sample_submission %>% separate(id,into = c('ID', 'date'), sep = 20)
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
sample<- sample %>% separate(id,into = c('ID', 'date'), sep = 20)
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
sample<- sample %>% separate(id,into = c('ID', 'date'), sep = 20) %>% distinct(ID) %>% nrow()
sample
air_00a91d42b08b08d9
rm(list=ls())
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
sample<- sample %>% separate(id,into = c('ID', 'date'), sep = 20) %>% distinct(ID) %>% nrow()
sample
sample <- read_csv("data/sample_submission.csv")
head(sample)
store_id <- read_csv("data/store_id_relation.csv")
sample<- sample %>% separate(id,into = c('ID', 'date'), sep = 20)
sample %>% distinct(ID) %>% nrow()
View(sample)
View(sample)
hpg_reserve <- read_csv("hpg_reserve.csv")
hpg_reserve <- read_csv("data/hpg_reserve.csv")
View(hpg_reserve)
View(hpg_reserve)
hpg_reserve <- read_csv("data/hpg_reserve.csv") distinct(hpg_store_id) %>% nrow()
hpg_reserve <- read_csv("data/hpg_reserve.csv") %>%  distinct(hpg_store_id) %>% nrow()
hpg_reserve %>%  distinct(hpg_store_id) %>% nrow()
hpg_reserve <- read_csv("data/hpg_reserve.csv")
hpg_reserve %>%  distinct(hpg_store_id) %>% nrow()
